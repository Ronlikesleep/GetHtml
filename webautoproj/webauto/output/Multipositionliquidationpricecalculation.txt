Multi-position liquidation price calculation | Aboard Docs Products The Exchange Aboard Asset Management ğŸ“–Tokenomics For Beginner Video Tutorials Asset Management Tutorials For Fund Managers For Investors Financial Terms What are Futures and Perpetual Futures? Why Indices and Index Futures Matter? Order Book and Spread Explained What are Market Makers and Market Takers? Risk Management Avoid Getting Rekt How to Hedge your ANC Principal when participating in liquidity mining on Anchor? Trading Understanding Candlestick Charts How to Read Support and Resistance Market Order vs. Limit Order: When to Use Which? For developer API General Info Public Data Trades Endpoints Account Endpoints Market Data Endpoints WebSocket Public Information Streams WebSocket Private Information Streams Signature Operation GitHub Implementation Perpetuals Futures Expected Changes in Accounts Multi-position liquidation price calculation Multi-positions bankruptcy price calculation Funding Calculation Indices Aboard DeFi-20 Index Methodology Price Feeds Fund Terms Fees Social Media Powered by GitBook Multi-position liquidation price calculation: otTMM: Sum of maintenance margin of other contracts: otTMM =âˆ‘k=1nabs(Skâˆ—Pkâˆ—Mk)âˆ’absâ¡(Siâˆ—Piâˆ—Mi)\text { otTMM }=\sum_{k=1}^{n} a b s\left(S_{k} * P_{k} * M_{k}\right)-\operatorname{abs}\left(S_{i} * P_{i} * M_{i}\right) otUPNL: Total unrealized gain or loss of other contracts: otUPNL =âˆ‘k=1nSkâˆ—(Pkâˆ’Pko)âˆ’Siâˆ—(Piâˆ’Pio)\text { otUPNL }=\sum_{k=1}^{n} S_{k} *\left(P_{k}-P_{k}^{o}\right)-S_{i} *\left(P_{i}-P_{i}^{o}\right) The liquidation price of the Ithâ€…â€ŠI^{\text {th}}\;contract ( PilP_i^l): Pil=Siâˆ—Pioâˆ’BI+ otTMM - otUPNL Siâˆ—(1âˆ’dirâ¡iâˆ—Mi)P_{i}^{l}=\frac{S_{i} * P_{i}^{o}-\mathrm{BI}+\text { otTMM - otUPNL }}{S_{i} *\left(1-\operatorname{dir}_{i} * M_{i}\right)} Variables: BIBI: Static account equity Pi:P_i:Current oracle price of the Ithâ€…â€ŠI^{\text {th}}\;contract Pil:P_i^l:The liquidation price of the Ithâ€…â€ŠI^{\text {th}}\;contract Pi0P_i^0: The opening price of the Ithâ€…â€ŠI^{\text {th}}\;contract Si:S_i: The number of open positions of the Ithâ€…â€ŠI^{\text {th}}\;contract, positive for long positions and negative for short positions. diri:dir_i: The opening direction of the Ithâ€…â€ŠI^{\text {th}}\;contract, +1 for long positions and -1 for short positions Mi:M_i:Maintenance margin rate of the Ithâ€…â€ŠI^{\text {th}}\;contract Example: Initial account balance BI=1000BI = 1000, ETH-USDC maintenance margin rate Mi=3M_i = 3%%, the opening price of ETH-USD Pi0=3000P_i^0 = 3000, Current oracle price PiP_i= 2900; BTC-USDC maintenance margin rate Mi=3M_i = 3%%, the opening price of BTC-USDC Pn0=40000P_n^0 = 40000, Current oracle price PnP_n= 38000. A trader buys SiS_i= 1.5 ETH-USDC, sells SnS_n= -0.1 BTC-USDC. The liquidation price of the ETH contracts is: otTMM = abs(âˆ’0.1âˆ—38000âˆ—3%)=144abs(-0.1*38000*3\%)=144 otUPNL = âˆ’0.1âˆ—(38000âˆ’40000)=200-0.1*(38000-40000)=200 Pil=1.5âˆ—3000âˆ’1000+114âˆ’2001.5âˆ—(1âˆ’3%)=2346.39P_{i}^{l}=\frac{1.5 *3000 -1000+114-200}{1.5 *(1-3\%)}=2346.39 The liquidation price of the BTC contracts is: otTMM = abs(1.5âˆ—2900âˆ—3%)=130.5abs(1.5*2900*3\%)=130.5 otUPNL = 1.5âˆ—(2900âˆ’3000)=âˆ’1501.5*(2900-3000)=-150 Pnl=âˆ’0.1âˆ—40000âˆ’1000+130.5+150âˆ’0.1âˆ—(1+3%)=45820.388P_{n}^{l}=\frac{ -0.1*40000 -1000+130.5+150}{-0.1 *(1+3\%)}=45820.388 PreviousExpected Changes in Accounts NextMulti-positions bankruptcy price calculation Last updated 2 years ago On this page Multi-position liquidation price calculation: Example: